---
layout: episode
title: "70: Swift Runtime ä¹‹ Method Dispatchâ€”Static, Table, or Message"
description: weak self podcast
date: 2021-03-07 18:00:00 +0800
categories: 
---
<iframe src="https://www.listennotes.com/embedded/e/58ad504b2b1d44e78b867447fe634d0c/" width="100%" style="width: 1px; min-width: 100%;" frameborder="0" scrolling="no" loading="lazy"></iframe>

æ³¢è‚¥ä¾†ä»‹ç´¹ Swift çš„ method dispatchã€‚

## ğŸ‘‹é–‹å ´

## âªä¸Šé›†ç¯€ç›®å›é¡§

è½çœ¾ dan12411 è²¢ç»ä»–çš„ Xcode æŠ€å·§ã€‚

## ğŸ“°ä¸€é€±é–‹ç™¼è€…æ–°è

- ğŸ§ªXcode 12.5 beta 3 & iOS 14.5 beta 3
- â¬[XcodesApp](https://github.com/RobotsAndPencils/XcodesApp)
- ğŸ¥°[å·¥ç¨‹å¸«å¹¹è©±â€”å·¥ç¨‹å¸«æ‡‰è©²è¦æ”¾å¿ƒå¤§è†½çš„ä¸å¯«æ–‡ä»¶](https://medium.com/@p5d12000/å·¥ç¨‹å¸«æ‡‰è©²è¦æ”¾å¿ƒå¤§è†½çš„ä¸å¯«æ–‡ä»¶-543c11062cd6)
- ğŸ§©[Flutter 2 is here](https://events.flutter.dev)

## â­ï¸Swift Runtime 1â€”Method Dispatch in Swift/ObjC: Static, Table, Message Dispatch

- struct çš„ func ä¸€å®šæ˜¯ static dispatchã€‚å› ç‚º optimization è¨­å®šçš„ä¸åŒï¼Œæœ‰å¯èƒ½æœƒæ˜¯ inline
- class çš„ func é€šå¸¸æ˜¯ table dispatchã€‚å¦‚æœåŠ äº† `final` æˆ–æ˜¯åœ¨ extension å®šç¾©æ–° func å°±æœƒæ˜¯ staticã€‚
- Swift è£¡çš„`NSObject` subclassï¼Œä¸€èˆ¬ func ä¹Ÿæ˜¯ table dispatchï¼Œå³ä½¿åŠ äº† `@objc` ä¹Ÿä¸€æ¨£ã€‚è‹¥æ˜¯ `@objc dynamic` å°±æœƒæ˜¯ message dispatchã€‚å¦‚æœåŠ äº† `final` å°±æœƒæ˜¯ static
- æƒ³è¦è‡ªè¡Œç ”ç©¶çš„è©±ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š

```swift
// Foo.swift
struct Foo {
    func bar() {
        print("struct bar")
    }
}

class FooClass {
    func bar() {
        print("class bar")
    }
}

let fs = Foo()
fs.bar()

let fc = FooClass()
fc.bar()
```

- å†ç”¨ `swiftc -emit-silgen Foo.swift -Onone` å³å¯å¾—åˆ° SIL

## ğŸ’¸å‹¸æ•—è©±é¡Œ

- [13 çš„é–‹ç™¼è€…é€±å ±](https://ethanhuang13.substack.com) æ­¡è¿å¤§å®¶ä¾†è²¼è·ç¼ºæˆ–æ±‚è·ä½œå“
- [å°å°å¤¢é­˜2](https://en.bandainamcoent.eu/little-nightmares/little-nightmares-ii)

## ğŸ‘‹æ”¶å°¾

## æ›´å¤š weak self

- è½çœ¾ä¿¡ç®± [weakself.dev@gmail.com](mailto:weakself.dev@gmail.com)
- å®˜ç¶² [https://weakself.dev](https://weakself.dev/)
- ä¸»æŒäºº [ä¸€ä¸‰](https://twitter.com/ethanhuang13)ã€[æ³¢è‚¥](https://twitter.com/PofatTseng)ã€[å–¬å–¬](https://twitter.com/joe_trash_talk)
- Twitter [@weak_self](https://twitter.com/weak_self)
- [æå•ç®±](https://peing.net/zh-TW/weak_self)
- [è´ŠåŠ© weak self](https://weakself.dev/#donation)